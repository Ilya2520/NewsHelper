# Проект "Новостной модуль на Symfony"

Этот проект представляет собой модуль новостей на PHP-фреймворке Symfony. Реализованы CRUD операции для новостных сущностей, REST API, сбор новостей из внешних RSS-лент, а также кэширование данных.

## Требования

- Symfony
- PHP >= 8.0
- Docker и Docker Compose
- База данных PostgreSQL или другая на ваше усмотрение

## Установка и запуск

1. Клонируйте репозиторий и перейдите в каталог проекта:
   ```bash
   git clone 
   cd NewsHelper
   ```
2. Запустите контейнеры Docker и зайдите в контейнер приложения:
   ```bash
   docker-compose up -d
   docker-compose exec -it app bash
   ```
3. Установите зависимости внутри контейнера:
    ```bash
   composer install
    ```
4. Настройте файл .env, можно скопировать конфигурацию по умолчанию
    ```bash
   cp .env.test .env
    ```
5. Запустите миграции для создания таблиц в базе данных:
    ```bash
   php bin/console doctrine:migrations:migrate
    ```
6. Запустите команду для сбора новостей:
    ```bash
   php bin/console app:parse-news [options]
    ```
   

## Команда для парсинга новостей

Команда `app:parse-news` предназначена для парсинга новостей из RSS-лент источников. Вы можете указать конкретный источник или несколько источников, а также ограничить количество новостей для парсинга.

### Синтаксис

```bash
php bin/console app:parse-news [options]
```
### Параметры

- `--source`  
  Указывает источник или источники новостей для парсинга. Вы можете указать один или несколько источников. Если параметр не задан, будут парсены все доступные источники.
  - **Тип:** строка
  - **Пример:** `--source="RIA News"`, `--source="Lenta"`

- `--limit`  
  Ограничивает количество новостей, которые нужно спарсить с каждого источника. Если параметр не указан, будет парситься количетсво новостей по умолчанию.
  - **Тип:** целое число
  - **Пример:** `--limit=5`

### Примеры использования

1. **Парсинг новостей с одного источника (например, "RIA News")**  
   Парсит все доступные новости из источника "RIA News":
   ```bash
   php bin/console app:parse-news --source="RIA News"
   php bin/console app:parse-news --source="RIA News" --source="Lenta"
   php bin/console app:parse-news --source="RIA News" --limit=5
   php bin/console app:parse-news
    ```

## TODO

- [ ] **Основная функциональность:**
    - [ ] Реализовать консольную команду для сбора новостей с источников
    - [ ] Обработать и логировать ошибки при сборе новостей из внешних источников

- [ ] **API:**
    - [ ] Добавить пагинацию в REST API для списка новостей
    - [ ] Добавить фильтрацию по категориям и источникам для новостей в REST API
    - [ ] Тестирование и доработка API для получения списка источников и количества новостей за период

- [ ] **Документация:**
    - [ ] Добавить подробную документацию API через Swagger
    - [ ] Описать сценарии использования консольной команды для сбора новостей
    - [ ] Добавить раздел с описанием конфигурации и использования Docker в README

- [ ] **Тестирование:**
    - [ ] Написать unit-тесты для сервисов и репозиториев
    - [ ] Реализовать функциональные тесты для REST API
    - [ ] Настроить покрытие кода тестами и интеграцию с CI/CD

- [ ] **Добавить логгировагние:**
  -  [ ]

- [ ] **Добавить кеширование:**
    -  [ ] Подключить redis
    -  [ ] Настрить инвалидацию кэша

- [ ] **Добавить сервер очередей:**
    - [ ] Добавить RabbitMQ в docker-compose.yml
    - [ ] Реализовать добавление задачи для парсинга с определенного источника в очередь 
    - [ ] Валидация задачи при исполнении

